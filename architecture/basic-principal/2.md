### 課題2

- このコードにはどのような問題点が潜んでいるでしょうか？
  - 購入のたびに過去の購入履歴をSELECTしているのが、購入回数の多いユーザーほど対象データがおおくなり、パフォーマンスが悪くなる可能性がある
    - 購入テーブルはサイズが大きくなることが考えられるので、クエリ自体も重たくなり、テーブルロック問題なども発生するかもしれない
    そもそも、過去1年間の購入履歴しか取得する必要がないのに、あるユーザーの全件取得はやり過ぎ感もある
- もしあなたが書き換えるとしたら、どのようにこのコードを改修しますか？
  - SQL側で検索条件を指定するようにする
    - SQLにわたす検索期間は実行時に指定できるようにして、仕様の変更時や別の箇所で似たようなクエリを使いたい場合は、パラメータの変更で対応できるようにする
