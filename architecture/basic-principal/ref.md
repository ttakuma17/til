## まとめメモ

**Defensive Programming(防御的プログラミング)**
- 目的: 何が起こるかわからない という前提でコードを書く。外部からの誤用、攻撃、バグからアプリケーションを守る
- あらゆる入力や実行環境が想定外の動作をする可能性を考慮して、プログラムがクラッシュしたりバグを起こさないようにコードを書く手法
- 信頼できない相手に対するため、外部との接点に必須
- 例
  - 入力検証（Input Validation）
  - nullチェック | undefinedチェック
  - ガード節
  - 例外処理
  - フェールセーフ
  - ロギング
  - セキュリティ対策

**Design by Contract(契約プログラミング)**
- 目的: ソフトウェアコンポーネント間の「契約」を明示し、それに従って動作することを保証する手法
- 双方の責任を明確にし、仕様に基づいた正当な使用を前提に設計する
- 信頼できるコード間での仕様を明示するため、内部設計やテストに有効
- 用語の説明
  - 事前条件
    - 目的: 処理の前提を明示し、無効な入力や誤用を防ぐため、呼び出し元と呼び出される側の責任を明確化。
    - 関数やメソッドを呼び出す前に、呼び出し元が満たしておかなければならない条件。
  - 事後条件
    - 目的: 正しい出力と状態遷移を保証する。コードの正当性とテストしやすさを向上
    - 関数やメソッドの実行後に、呼び出された側が必ず保証すべき結果や状態。
  - 不変条件
    - 目的: モデルの一貫性を維持。実装ミスの検出と複雑な状態管理の整理。
    - オブジェクトやシステムのあらゆる操作・状態変化の中で常に保たれるべき条件。


Webアプリ開発における使い分け、外部境界(ユーザー入力、APIリクエスト、DBアクセス、外部API呼び出し)に防御的手法、内部構造(サービス/ドメインなどのビジネスロジック)に契約的手法を適用するということをベースに考える

## 参考
- [イラストで理解するSOLID原則](https://qiita.com/baby-degu/items/d058a62f145235a0f007)
- [SOLID原則完全に理解した！になるための本](https://zenn.dev/nakurei/books/solid-principle-kanzen-rikai)
- [契約プログラミング](https://ja.wikipedia.org/wiki/%E5%A5%91%E7%B4%84%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)
- [防御的プログラミングと契約プログラミング](https://qiita.com/yoshitaro-yoyo/items/bb8cc631276380b68c13)
- [予防に勝る防御なし - 堅牢なコードを導く様々な設計のヒント](https://speakerdeck.com/twada/growing-reliable-code-phperkaigi-2022)
- [デメテルの法則を厳密に守るにはどうすればいいの？](https://qiita.com/br_branch/items/37cf71dd5865cae21401)
- [デメテルの法則とは？深堀してみた](https://zenn.dev/miya_tech/articles/b59916140347e2)
- [コード品質向上のテクニック：第55回 デメテルを知っているか](https://techblog.lycorp.co.jp/ja/20250123icq)
- [コードを複雑化させないために意識したいパターン集](https://qiita.com/TakeshiFukushima/items/0b16aef3d320a2ccb7c3)