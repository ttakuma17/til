# 課題1

## 1. 前提
- テーブル設計において、「どのようにテーブルを分けるか」「どのカラムにどの情報を格納するか」を考える。

## 2. アンチパターンの名前
- **マルチカラムアトリビュートパターン（Multi-column Attribute Pattern）**
  - 同じ種類のデータ（例：タグ）を複数のカラムとして定義する設計。

## 3. アンチパターンによる問題
### カラムの増加による問題
- タグの数に応じてカラムを追加する必要があり、テーブルの役割が曖昧になる。
- カラムの変更が発生するたびにマイグレーションが必要になり、本番環境への影響を考慮しなければならないため、運用負荷が高まる。

### NULL値の影響
- タグカラムには `NULL` が入り得るため、`NULL` を考慮したSQLを書く必要がある。
- アプリケーション側でも `NULL` に対する条件分岐が増え、コードの複雑化を招く。

### 集計の困難さ
- Postごとに持つタグの数が異なるため、最大値を基準にカラムが `NULL` でない値を取得して集計する必要がある。

### タグの追加・削除の難しさ
- 例：3つのタグを持つPostからタグ2だけを削除する場合、削除自体は容易だが、追加時にはタグ2に新しい値を入れるか、新たにカラムを追加するかを決める必要があり、アプリケーション側での考慮が増える。

### 技術的な制約
- **検索の非効率**
  - どのタグカラムに値が入っているかわからないため、全てのタグ列を対象に検索する必要がある。
  - SQLで明示的にすべてのカラムを指定する必要があり、クエリが煩雑になる。
- **更新の困難さ**
  - どのタグカラムに値が入っているか分からないため、一旦 `SELECT` で確認してから `UPDATE` する必要がある。
- **一意性制約が適用できない**
  - タグが複数のカラムに分散するため、データの一意性を保証しづらい。

## 4. アンチパターンを使うことを許容する条件
- **属性値の種類（数）が限定できる場合**
  - タグの種類が固定で、新たに増えることがない場合は許容されることもある。

## 5. 参考文献
- https://qiita.com/fktnkit/items/52c45c61db0a209694ca
- https://minegishirei.hatenablog.com/entry/2023/02/11/194550
- https://qiita.com/mizunokura/items/a9be12e0eddcf5d90f07
- https://zenn.dev/keishi815/articles/7bb65d09253d4e
- https://zenn.dev/asamin/articles/fb410c6d9033b9
- 
