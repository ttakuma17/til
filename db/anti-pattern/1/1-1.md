### 課題1

# ジェイウォークパターンに関する整理

## 1. 前提
- テーブル設計において、「どのようにテーブルを分けるか」「どのカラムにどの情報を格納するか」を考える。

## 2. アンチパターンの名前
- **ジェイウォークパターン**
  - 1対多の関係をサポートするために、複数の値をカンマ区切りなどの形式で1つのカラムに保存する設計。

## 3. アンチパターンによる問題
### データの正規化がされておらず、SQLが複雑になる
- 検索が難しく、可読性が低下し、バグの温床となる。
- インデックスが効かず、パフォーマンスが悪化する可能性がある。

### タグデータの一貫性が保てない
- `"Typescript"`、`"typescript"`、`"TYPESCRIPT"` など表記揺れが発生し、集計が難しくなる。
- タグ単位での検索や絞り込みがしづらい。
- いつどのタグが追加されたかが記録されないため、監査などの要件を満たしにくい。
- 禁止ワードの登録・管理が困難になる。

### データの重複・増大
- 同じタグデータが繰り返し格納され、DBのストレージ消費が増加する。

### 技術的な制約
- **データの妥当性検証ができない**
  - 「,」区切りをルールとした場合でも、入力データが常にその形式を守るとは限らない。
- **SQLの処理が煩雑になる**
  - LIKE検索で「,」を考慮したクエリが必要になり、先頭・末尾の処理を個別に考慮しなければならない。
- **集約クエリが適用しづらい**
  - 1レコードに複数の値が含まれると、適切な集約ができない。
- **データの格納上限に達する可能性がある**
- **外部キー制約が設定できず、データの整合性を維持しにくい**

## 4. アンチパターンを使うことを許容する条件
- **カンマ区切りの状態で保存することが必須要件である場合**
  - 例：CSVデータをDBにそのまま保存する必要があり、SQLで更新を行わないケース。

## 5. 参考文献
- https://zenn.dev/narukun/articles/e0e20abec55700
- https://zenn.dev/ktom106/articles/f94b60a119fea4
- https://qiita.com/fktnkit/items/84294ed70bb026734468
- https://zenn.dev/empenguin/articles/dc7dbd4af10847
- https://note.com/standenglish/n/n4b3d3c799813
- https://qiita.com/aconit96/items/24f790662d9b88a3ab74
