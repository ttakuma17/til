# 2-1

### 変更点
- ProductGroupテーブルの削除
- OrderDetailsごとにオプション（わさび有無、シャリサイズ大小）を指定するためにOrderDetailsOptionsテーブルで管理
- 商品ごとのオプションを紐づける中間テーブルでProductOptionsで管理する

```mermaid
---
title: お持ち帰りメニュー ご注文表
---
erDiagram
    Customers ||--o{ Orders : creates
    Customers {
        int id PK
        string name
        int tel
        timestamp create_date
        timestamp update_date
    }
    Orders ||--|{ OrdersDetail : contains
    Orders { 
        int id PK
        boolean paid
        int payment_total
        int customer_id FK
        timestamp create_date
        timestamp update_date
    }
    OrdersDetail ||--|| Products : describes
    OrdersDetail {
        int id PK
        int quantity
        int tax
        int order_id FK
        int product_id FK
        timestamp create_date
        timestamp update_date
    }
    Products {
        int id PK
        string name
        int price
        int product_category_id FK
        timestamp create_date
        timestamp update_date 
    }
    Products }|--|| ProductCategory : belongsTo
    ProductCategory {
        int id PK
        string name
        timestamp create_date
        timestamp update_date
    }
    Products ||--|{ ProductOptions : has
    ProductOptions {
        int id PK
        int product_id FK
        int option_id FK
        timestamp create_date
        timestamp update_date
    }
    Options ||--|{ ProductOptions : has
    Options {
        int id PK
        string name
        string value
        timestamp create_date
        timestamp update_date
    }
    OrdersDetail ||--o{ OrderDetailsOptions: describes
    OrderDetailsOptions ||--|{ Options: has
    OrderDetailsOptions {
        int id PK
        int orders_detail_id FK
        int option_id FK
        timestamp create_date
        timestamp update_date
    }
```

### メモ
当初は、シャリのサイズに関してもわさびの有無と同様に別商品として扱うことで、テーブル変更は生じない想定だった。  
商品グループ（ProductGroup）テーブルでこれらが同じ商品グループに所属することを区別できれば良いという考えで、
Productテーブルに玉子でもわさびつきだったら、別商品として扱うようにしていた
- それぞれ、別のIDを持つ別商品として扱う。
  - たまご
  - たまご シャリ小
  - たまご シャリ大

わさびぬきで人気の商品なんだろうとかの検索を考えると、商品テーブルのnameであいまい検索しないといけなくなることで性能面で微妙そうだし、
運用担当者としても、商品管理が煩雑になるように思えたのでテーブル設計変更が必要と判断

